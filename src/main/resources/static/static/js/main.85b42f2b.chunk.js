(this.webpackJsonpjs=this.webpackJsonpjs||[]).push([[0],{163:function(e,t,a){e.exports=a(303)},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},198:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),s=(a(168),a(169),a(119)),o=(a(170),a(309)),c=a(311),u=a(305),m=a(33),d=a(306),f=a(307),g=a(50),E=a(84),h=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,e.json().then((function(e){t.error=e})),Promise.reject(t)},N=function(e){return r.a.createElement("div",{style:{width:"1400px",margin:"0 auto",textTransform:"capitalize",textAlign:"center"}},e.children)},p=(a(171),function(e){var t=e.numberofStudents,a=e.handleOpen;return r.a.createElement("div",{className:"footer"},r.a.createElement(N,null,void 0!==t?r.a.createElement(c.a,{className:"avatar",size:"large"},t):null,r.a.createElement(m.a,{onClick:function(){return a()},type:"primary"},"Add New Student +")))}),v=a(310),b=function(e,t,a){o.a[e]({message:t,description:a})},y=function(e,t){return b("error",e,t)},S=a(156),k=a(308),A=a(312),F=(a(198),function(e){var t=e.onSuccess,a=e.onFailure;return r.a.createElement(S.a,{initialValues:{firstName:"",lastName:"",email:"",gender:""},validate:function(e){var t={};return e.firstName||(t.firstName="First Name required"),e.lastName||(t.lastName="Last Name required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email Required",e.gender?["MALE","FEMALE","male","female"].includes(e.gender)||(t.gender="Gender must be (MALE,FEMALE,male,female)"):t.gender="Gender required",t},onSubmit:function(e,n){var r=n.setSubmitting;(function(e){return Object(E.a)("api/students",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(h)})(e).then((function(){t()})).catch((function(e){a(e)})).finally((function(){r(!1)}))}},(function(e){var t=e.values,a=e.errors,n=e.touched,i=e.isSubmitting,l=e.submitForm,s=e.handleChange,o=e.handleBlur,c=e.handleSubmit,u=e.isValid;return r.a.createElement("form",{onSubmit:c},r.a.createElement(k.a,{className:"Input",name:"firstName",onChange:s,onBlur:o,value:t.firstName,placeholder:"First Name E g Anis "}),a.firstName&&n.firstName&&r.a.createElement(A.a,{className:"tag"},a.firstName),r.a.createElement(k.a,{className:"Input",name:"lastName",onChange:s,onBlur:o,value:t.lastName,placeholder:"Last Name E g Medini "}),a.lastName&&n.lastName&&r.a.createElement(A.a,{className:"tag"},a.lastName),r.a.createElement(k.a,{className:"Input",name:"email",type:"email",onChange:s,onBlur:o,value:t.email,placeholder:"Email E g Test@gmail.com  "}),a.email&&n.email&&r.a.createElement(A.a,{className:"tag"},a.email),r.a.createElement(k.a,{name:"gender",onChange:s,onBlur:o,value:t.gender,placeholder:"Gender E g MALE , FEMALE "}),a.gender&&n.gender&&r.a.createElement(A.a,{className:"tag"},a.gender),r.a.createElement(m.a,{className:"btn",onClick:l,type:"submit",disabled:i|(n&&!u)},"Submit"))}))}),I=r.a.createElement(v.a,{style:{fontSize:67,margin:"auto"},spin:!0});var j=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)([{students:[],isFetching:!1,isAddStudentModalVisible:!1}]),o=Object(s.a)(l,2),v=o[0],b=o[1],S=function(){return i(!1)};Object(n.useEffect)((function(){b({isFetching:!0}),Object(E.a)("api/students").then(h).then((function(e){return e.json().then((function(e){console.log(e),b({students:e,isFetching:!1})}))})).catch((function(e){var t=e.error.message,a=e.error.httpStatus;console.log(e.error),y(t,a),b({isFetching:!1})}))}),[]);var k=null;if(v.isFetching&&(k=r.a.createElement(N,null,I)),v.students&&v.students.length){var A=[{title:"",key:"avatar",render:function(e,t){return r.a.createElement(c.a,{size:"large"},t.firstName.charAt(0),t.lastName.charAt(0))}},{title:"Student ID",dataIndex:"studentId",key:"studentId"},{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Action",key:"action",render:function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(u.a,{placement:"topRight",title:"are you sure you want to delete ".concat(t.firstName," ").concat(t.lastName),onConfirm:function(){return e=t.studentId,Object(E.a)("api/students/".concat(e),{method:"DELETE"}).then(h);var e},okText:"Yes,Delete",cancelText:"No, Keep it",onCancel:function(e){return e.stopPropagation()}},r.a.createElement(m.a,{type:"danger",onClick:function(e){e.stopPropagation(t.studentId)}},"DELETE")))}}];return r.a.createElement(N,null,r.a.createElement(d.a,{style:{marginBottom:"100px"},dataSource:v.students,columns:A,rowKey:"studentId"}),r.a.createElement(f.a,{className:"modal",title:"Add New Student",visible:a,onOk:S,onCancel:S},r.a.createElement(F,{onSuccess:function(){return S()},onFailure:function(e){var t=e.error.message,a=e.error.httpStatus;y(t,a)}})),r.a.createElement(p,{numberofStudents:v.students.length,handleOpen:function(){return i(!0)}}),";")}return r.a.createElement("div",null,k||r.a.createElement(g.a,{description:"No Student Found"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[163,1,2]]]);
//# sourceMappingURL=main.85b42f2b.chunk.js.map