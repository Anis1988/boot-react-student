{"ast":null,"code":"import _slicedToArray from\"/Users/anismedini/Downloads/deployamz/src/js-copy-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Fragment}from\"react\";import\"./App.css\";import{Avatar,Table,Modal,Empty,Button,Popconfirm,notification}from\"antd\";import{getAllStudents,deleteStudent,updateStudent}from\"./Client\";import Container from\"./Container\";import Footer from\"./Footer\";import{LoadingOutlined}from\"@ant-design/icons\";import{errorNotification}from\"./Notification\";import AddStudentForm from\"./forms/AddstudentForm\";var antIcon=/*#__PURE__*/React.createElement(LoadingOutlined,{style:{fontSize:67,margin:\"auto\"},spin:true});function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openModal=_useState2[0],setOpenModal=_useState2[1];var _useState3=useState([{students:[],isFetching:false,isAddStudentModalVisible:false}]),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var openAddStudentModal=function openAddStudentModal(){return setOpenModal(true);};var closeAddStudentModal=function closeAddStudentModal(){return setOpenModal(false);};var openNotificationWithIcon=function openNotificationWithIcon(type,message,description){return notification[type]({message:message,description:description});};useEffect(function(){setState({isFetching:true});getAllStudents().then(function(res){return res.json().then(function(students){console.log(students);setState({students:students,isFetching:false});});}).catch(function(error){var message=error.error.message;var description=error.error.httpStatus;console.log(error.error);errorNotification(message,description);setState({isFetching:false});});},[]);// eslint-disable-next-line\nvar updateStudentForSubmit=function updateStudentForSubmit(student){updateStudent(student.studentId,student).then(function(){openNotificationWithIcon(\"success\",\"Student updated\",\"\".concat(student.studentId,\" was updated\"));}).catch(function(err){openNotificationWithIcon(\"error\",\"error\",\"(\".concat(err.error.status,\") \").concat(err.error.error));});};var content=null;if(state.isFetching){content=/*#__PURE__*/React.createElement(Container,null,antIcon);}if(state.students&&state.students.length){var columns=[{title:\"\",key:\"avatar\",render:function render(text,student){return/*#__PURE__*/React.createElement(Avatar,{size:\"large\"},student.firstName.charAt(0),student.lastName.charAt(0));}},{title:\"Student ID\",dataIndex:\"studentId\",key:\"studentId\"},{title:\"First Name\",dataIndex:\"firstName\",key:\"firstName\"},{title:\"Last Name\",dataIndex:\"lastName\",key:\"lastName\"},{title:\"Email\",dataIndex:\"email\",key:\"email\"},{title:\"Gender\",dataIndex:\"gender\",key:\"gender\"},{title:\"Action\",key:\"action\",render:function render(text,record){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Popconfirm,{placement:\"topRight\",title:\"are you sure you want to delete \".concat(record.firstName,\" \").concat(record.lastName),onConfirm:function onConfirm(){return deleteStudent(record.studentId);},okText:\"Yes,Delete\",cancelText:\"No, Keep it\",onCancel:function onCancel(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(Button,{type:\"danger\",onClick:function onClick(e){e.stopPropagation(record.studentId);}},\"DELETE\")));}}];return content=/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Table,{style:{marginBottom:\"100px\"},dataSource:state.students,columns:columns,rowKey:\"studentId\"}),/*#__PURE__*/React.createElement(Modal,{className:\"modal\",title:\"Add New Student\",visible:openModal,onOk:closeAddStudentModal,onCancel:closeAddStudentModal},/*#__PURE__*/React.createElement(AddStudentForm,{onSuccess:function onSuccess(){return closeAddStudentModal();},onFailure:function onFailure(err){var message=err.error.message;var description=err.error.httpStatus;errorNotification(message,description);}})),/*#__PURE__*/React.createElement(Footer,{numberofStudents:state.students.length,handleOpen:function handleOpen(){return openAddStudentModal();}}),\";\");}return/*#__PURE__*/React.createElement(\"div\",null,content?content:/*#__PURE__*/React.createElement(Empty,{description:\"No Student Found\"}));}export default App;","map":{"version":3,"sources":["/Users/anismedini/Downloads/deployamz/src/js-copy-2/src/App.js"],"names":["React","useState","useEffect","Fragment","Avatar","Table","Modal","Empty","Button","Popconfirm","notification","getAllStudents","deleteStudent","updateStudent","Container","Footer","LoadingOutlined","errorNotification","AddStudentForm","antIcon","fontSize","margin","App","openModal","setOpenModal","students","isFetching","isAddStudentModalVisible","state","setState","openAddStudentModal","closeAddStudentModal","openNotificationWithIcon","type","message","description","then","res","json","console","log","catch","error","httpStatus","updateStudentForSubmit","student","studentId","err","status","content","length","columns","title","key","render","text","firstName","charAt","lastName","dataIndex","record","e","stopPropagation","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport \"./App.css\";\nimport {\n  Avatar,\n  Table,\n  Modal,\n  Empty,\n  Button,\n  Popconfirm,\n  notification,\n} from \"antd\";\nimport { getAllStudents, deleteStudent, updateStudent } from \"./Client\";\nimport Container from \"./Container\";\nimport Footer from \"./Footer\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { errorNotification } from \"./Notification\";\nimport AddStudentForm from \"./forms/AddstudentForm\";\n\nconst antIcon = (\n  <LoadingOutlined\n    style={{\n      fontSize: 67,\n      margin: \"auto\",\n    }}\n    spin\n  />\n);\n\nfunction App() {\n  const [openModal, setOpenModal] = useState(false);\n  const [state, setState] = useState([\n    {\n      students: [],\n\n      isFetching: false,\n      isAddStudentModalVisible: false,\n    },\n  ]);\n  const openAddStudentModal = () => setOpenModal(true);\n  const closeAddStudentModal = () => setOpenModal(false);\n  const openNotificationWithIcon = (type, message, description) =>\n    notification[type]({ message, description });\n\n  useEffect(() => {\n    setState({ isFetching: true });\n    getAllStudents()\n      .then((res) =>\n        res.json().then((students) => {\n          console.log(students);\n          setState({\n            students,\n            isFetching: false,\n          });\n        })\n      )\n      .catch((error) => {\n        const message = error.error.message;\n        const description = error.error.httpStatus;\n        console.log(error.error);\n        errorNotification(message, description);\n        setState({ isFetching: false });\n      });\n  }, []);\n\n  // eslint-disable-next-line\n  const updateStudentForSubmit = (student) => {\n    updateStudent(student.studentId, student)\n      .then(() => {\n        openNotificationWithIcon(\n          \"success\",\n          \"Student updated\",\n          `${student.studentId} was updated`\n        );\n      })\n      .catch((err) => {\n        openNotificationWithIcon(\n          \"error\",\n          \"error\",\n          `(${err.error.status}) ${err.error.error}`\n        );\n      });\n  };\n\n  let content = null;\n\n  if (state.isFetching) {\n    content = <Container>{antIcon}</Container>;\n  }\n  if (state.students && state.students.length) {\n    const columns = [\n      {\n        title: \"\",\n        key: \"avatar\",\n        render: (text, student) => (\n          <Avatar size=\"large\">\n            {student.firstName.charAt(0)}\n            {student.lastName.charAt(0)}\n          </Avatar>\n        ),\n      },\n      {\n        title: \"Student ID\",\n        dataIndex: \"studentId\",\n        key: \"studentId\",\n      },\n      {\n        title: \"First Name\",\n        dataIndex: \"firstName\",\n        key: \"firstName\",\n      },\n      {\n        title: \"Last Name\",\n        dataIndex: \"lastName\",\n        key: \"lastName\",\n      },\n      {\n        title: \"Email\",\n        dataIndex: \"email\",\n        key: \"email\",\n      },\n      {\n        title: \"Gender\",\n        dataIndex: \"gender\",\n        key: \"gender\",\n      },\n      {\n        title: \"Action\",\n        key: \"action\",\n        render: (text, record) => (\n          <Fragment>\n            <Popconfirm\n              placement=\"topRight\"\n              title={`are you sure you want to delete ${record.firstName} ${record.lastName}`}\n              onConfirm={() => deleteStudent(record.studentId)}\n              okText=\"Yes,Delete\"\n              cancelText=\"No, Keep it\"\n              onCancel={(e) => e.stopPropagation()}\n            >\n              <Button\n                type=\"danger\"\n                onClick={(e) => {\n                  e.stopPropagation(record.studentId);\n                }}\n              >\n                DELETE\n              </Button>\n            </Popconfirm>\n          </Fragment>\n        ),\n      },\n    ];\n\n    return (content = (\n      <Container>\n        <Table\n          style={{ marginBottom: \"100px\" }}\n          dataSource={state.students}\n          columns={columns}\n          rowKey=\"studentId\"\n        />\n        <Modal\n          className=\"modal\"\n          title=\"Add New Student\"\n          visible={openModal}\n          onOk={closeAddStudentModal}\n          onCancel={closeAddStudentModal}\n        >\n          {/* inside our modal  */}\n          <AddStudentForm\n            onSuccess={() => closeAddStudentModal()}\n            onFailure={(err) => {\n              const message = err.error.message;\n              const description = err.error.httpStatus;\n              errorNotification(message, description);\n            }}\n          />\n          {/*      */}\n        </Modal>\n        <Footer\n          numberofStudents={state.students.length}\n          handleOpen={() => openAddStudentModal()}\n        />\n        ;\n      </Container>\n    ));\n  }\n\n  return (\n    <div>{content ? content : <Empty description=\"No Student Found\" />}</div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}